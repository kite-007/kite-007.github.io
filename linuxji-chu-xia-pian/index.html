<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title># Linux（Shell编程） | Fr</title>

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://kite-007.github.io/favicon.ico?v=1615557060085">
<link rel="stylesheet" href="https://kite-007.github.io/styles/main.css">



<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>



    <meta name="description" content="
1. Shell介绍：
2. Shell脚本的执行方式：
3. Shell变量
4. 设置环境变量
5. 位置参数变量
6. 预定义变量
7. 运算符
8. 条件判断
9. 流程控制
10. read读取控制台输入
11. 自定义函数
1..." />
    <meta name="keywords" content="" />
  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://kite-007.github.io">
        <img src="https://kite-007.github.io/images/avatar.png?v=1615557060085" class="site-logo">
        <h1 class="site-title">Fr</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            首页
          </a>
        
      
        
          <a href="https://kite-007.github.io/tags" class="site-nav">
            标签
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      意志坚定，持之以恒
    </div>
    <div class="site-footer">
      Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <a class="rss" href="https://kite-007.github.io/atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title"># Linux（Shell编程）</h2>
            <div class="post-date">2021-03-11</div>
            
            <div class="post-content" v-pre>
              <p><ul class="markdownIt-TOC">
<li><a href="#1-shell%E4%BB%8B%E7%BB%8D">1. Shell介绍：</a></li>
<li><a href="#2-shell%E8%84%9A%E6%9C%AC%E7%9A%84%E6%89%A7%E8%A1%8C%E6%96%B9%E5%BC%8F">2. Shell脚本的执行方式：</a></li>
<li><a href="#3-shell%E5%8F%98%E9%87%8F">3. Shell变量</a></li>
<li><a href="#4-%E8%AE%BE%E7%BD%AE%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">4. 设置环境变量</a></li>
<li><a href="#5-%E4%BD%8D%E7%BD%AE%E5%8F%82%E6%95%B0%E5%8F%98%E9%87%8F">5. 位置参数变量</a></li>
<li><a href="#6-%E9%A2%84%E5%AE%9A%E4%B9%89%E5%8F%98%E9%87%8F">6. 预定义变量</a></li>
<li><a href="#7-%E8%BF%90%E7%AE%97%E7%AC%A6">7. 运算符</a></li>
<li><a href="#8-%E6%9D%A1%E4%BB%B6%E5%88%A4%E6%96%AD">8. 条件判断</a></li>
<li><a href="#9-%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6">9. 流程控制</a></li>
<li><a href="#10-read%E8%AF%BB%E5%8F%96%E6%8E%A7%E5%88%B6%E5%8F%B0%E8%BE%93%E5%85%A5">10. read读取控制台输入</a></li>
<li><a href="#11-%E8%87%AA%E5%AE%9A%E4%B9%89%E5%87%BD%E6%95%B0">11. 自定义函数</a></li>
<li><a href="#12-%E7%B3%BB%E7%BB%9F%E5%87%BD%E6%95%B0">12. 系统函数</a></li>
</ul>
(Linux)</p>
<h1 id="1-shell介绍">1. Shell介绍：</h1>
<p><strong>Shell是一个命令行解释器，提供了一个向Linux内核发送请求以便运行程序的界面系统级程序，用户可以用Shell来启动，挂起，停止甚至编写一些程序。在进行服务集群管理时，需要编写Shell程序来进行服务器管理。</strong><br>
<img src="https://kite-007.github.io/post-images/1615466696793.png" alt="" loading="lazy"></p>
<h1 id="2-shell脚本的执行方式">2. Shell脚本的执行方式：</h1>
<ol>
<li>脚本的格式要求：
<ol>
<li>脚本以#!/bin/bash开头</li>
<li>脚本需要有可执行权限</li>
</ol>
<ul>
<li>编写shell：helloworld
<ul>
<li><img src="https://kite-007.github.io/post-images/1615467173469.png" alt="" loading="lazy"></li>
<li>创建一个文件shellcode专门用来存放shell</li>
<li>注意要赋予.sh文件的执行权限</li>
<li><img src="https://kite-007.github.io/post-images/1615467574630.png" alt="" loading="lazy"></li>
<li>hello.sh：</li>
</ul>
</li>
</ul>
</li>
</ol>
<pre><code>  #!/bin/bash
  echo &quot;helloworld!&quot;
</code></pre>
<h1 id="3-shell变量">3. Shell变量</h1>
<ol>
<li>Shell变量介绍：
<ol>
<li>Linux变量分为：系统变量和用户自定义变量。</li>
<li>系统变量：￥HOME、￥PATH、￥SHELL、￥USER等等（$符号被转义）。</li>
<li>显示当前shell中的所有变量：set。</li>
</ol>
</li>
<li>shell变量的定义：
<ol>
<li>变量可以由数字字母下划线组成，但是不能以数字开头。</li>
<li>等号两边不能有空格</li>
<li>变量名称一般习惯大写</li>
</ol>
<ul>
<li>将命令的返回值赋给变量：</li>
<li>A=<code>date</code> 反引号，运行里面的命令，并把结果返回给A</li>
<li>A=$(date)等价于反引号</li>
</ul>
</li>
<li>shell变量的定义：
<ol>
<li>定义变量：变量名=值；注意不能有空格。</li>
<li>撤销变量：unset 变量。</li>
<li>静态变量：readonly变量；注意，不能unset</li>
</ol>
<ul>
<li>var.sh:</li>
</ul>
</li>
</ol>
<pre><code>#!/bin/bash
#!/bin/bash
#定义变量：
A=100
#输出变量需要加$符号
echo $A
echo A=$A
echo &quot;A=$A&quot;
#撤销变量：unset 变量
unset A
echo A=$A
#静态变量：注意，不能unset
readonly B=1
echo B=$B
#unset B
echo C=`date`
</code></pre>
<h1 id="4-设置环境变量">4. 设置环境变量</h1>
<ol>
<li>基本语法：
<ol>
<li>export 变量名=变量值（将shell变量输出为环境变量/全局变量）</li>
<li>source 配置文件（让修改后的配置信息立即生效）</li>
<li>echo $变量名（查询环境变量的值）</li>
</ol>
</li>
<li>说明：
<ol>
<li>环境变量可以和多个文件共享</li>
<li>每次配置完环境变量需要用source命令进行刷新，否则无效</li>
<li>shell多行注释：（：&lt;&lt;!Enter内容Enter！）</li>
</ol>
</li>
</ol>
<h1 id="5-位置参数变量">5. 位置参数变量</h1>
<ul>
<li>当执行一个shell脚本时，如果想要得到命令行的参数信息，就可以使用到位置参数变量</li>
<li>案例：./myshell.sh 100 200，可以在myshell.sh中获取到参数信息</li>
<li>基本语法：
<ul>
<li>$n：（n为数字，0代表命令本身，1-9代表第一到九个参数，从第十个开始，参数需要用到大括号包含，例如：{10}）</li>
<li>$*：（代表命令行中所有的参数，它把所有的参数看成一个整体）</li>
<li>$@：（这个也代表所有的参数，不过它把每个参数区分对待）</li>
<li>$#：（代表命令行中所有参数的个数）</li>
<li>myshell.sh :命令：./myshell.sh 100 200</li>
</ul>
</li>
</ul>
<pre><code>#/bin/bash
echo &quot;$0 $1 $2 $3&quot;
echo &quot;$*&quot;
echo &quot;$@&quot;
echo &quot;$#&quot;
</code></pre>
<h1 id="6-预定义变量">6. 预定义变量</h1>
<ol>
<li>介绍：
<ol>
<li>就是shell设计者事先已经设置好的变量，可以直接再shell脚本中使用</li>
</ol>
</li>
<li>基本语法：
<ol>
<li>两个$（当前的进程号(PID)）</li>
<li>$!（后台运行的最后一个进程的进程号(PID)）在命令后面加&amp;表示后台执行</li>
<li>$?（最后一次执行的命令的返回状态。如果是0表示上一个命令正确执行，如果是非0(具体是哪个数由命令决定)，则反之）</li>
</ol>
</li>
</ol>
<h1 id="7-运算符">7. 运算符</h1>
<ol>
<li>shell的各种运算操作
<ol>
<li>基本语法：
<ol>
<li>&quot;$((运算式))&quot;或&quot;$[运算式]&quot;或expr m + n //expression表达式</li>
<li>特别注意：expr运算符之间要有空格，如果希望将expr的结果赋给某个变量，使用``(反引号括起)</li>
<li>expr *，/，% 乘，除，取余</li>
</ol>
</li>
<li>案例：operator.sh</li>
</ol>
</li>
</ol>
<pre><code>#/bin/bash
#案例1：计算（2+3）X4的值
#方式一：
RESULT1=$(((2+3)*4))
echo &quot;RESULT1=$RESULT1&quot;
#方式二：推荐使用
RESULT2=$[(2+3)*4]
echo &quot;RESULT2=$RESULT2&quot;
#方式三：
RESULT3=`expr 2 + 3`
RESULT4=`expr $RESULT3 \* 4`
echo &quot;RESULT3=$RESULT3&quot;
echo &quot;RESULT4=$RESULT4&quot;
#将命令行的两个参数的和
echo &quot;RESULT=$[($1+$2)*$3]&quot;
</code></pre>
<h1 id="8-条件判断">8. 条件判断</h1>
<ol>
<li>条件判断语句：
<ol>
<li><a href="%E7%89%B9%E5%88%AB%E6%B3%A8%E6%84%8F%EF%BC%9Acondition%E7%9A%84%E5%89%8D%E5%90%8E%E8%A6%81%E6%9C%89%E7%A9%BA%E6%A0%BC"> condition </a></li>
<li>非空返回true，可以使用$?验证（0为true，&gt;1为false）</li>
<li>[ condition ] &amp;&amp; echo OK || echo notok，条件满足执行后面的语句</li>
</ol>
</li>
<li>条件判断选项<br>
1.</li>
<li>判断语句：</li>
</ol>
<pre><code>if [ 判断 ]
then
    语句
fi
</code></pre>
<ol start="4">
<li>案例：ifdemo.sh</li>
</ol>
<pre><code>#/bin/bash
#案例1：&quot;OK&quot;是否等于&quot;OK&quot;
if [ &quot;OK&quot; = &quot;OK&quot; ]
then
        echo &quot;equal&quot;
fi
#案例2：23是否大于22
if [ 23 -ge 22 ]
then
        echo &quot;大于&quot;
fi
#案例3：/root/shellcode/hello.sh文件是否存在
if [ -f /root/shellcode/hello.sh ]
then
        echo &quot;存在该文件&quot;
fi
</code></pre>
<h1 id="9-流程控制">9. 流程控制</h1>
<ol>
<li>单分支if
<ol>
<li>if [ 条件判断式 ]</li>
<li>then</li>
<li>代码语句</li>
<li>fi（结束标志）</li>
</ol>
</li>
<li>多分支if
<ol>
<li>if [ 条件判断式 ]</li>
<li>then</li>
<li>代码语句</li>
<li>elif</li>
<li>then</li>
<li>代码语句</li>
<li>fi（结束标志）</li>
</ol>
</li>
<li>case语句
<ol>
<li>case $变量名 in</li>
<li>&quot;值1&quot;)</li>
<li>如果变量的值等于值1，则执行程序1</li>
<li>;;（表示一个语句分支的结束）</li>
<li>&quot;值2&quot;)</li>
<li>如果变量的值等于值2，则执行程序2</li>
<li>;;（表示一个语句分支的结束）</li>
<li>省略其他分支</li>
<li>*)</li>
<li>如果变量的值都不是以上的值，则执行此程序</li>
<li>;;</li>
<li>esac（总结束的标志）</li>
</ol>
</li>
<li>for语句
<ol>
<li>for [变量] in 值1 值2。。。</li>
<li>do</li>
<li>代码</li>
<li>done</li>
</ol>
</li>
<li>for语句（传统）
<ol>
<li>for (( 初始值;循环控制条件;变量变化 ))</li>
<li>do</li>
<li>代码</li>
<li>done</li>
</ol>
</li>
<li>while语句
<ol>
<li>while [ 条件判断 ]</li>
<li>do</li>
<li>代码</li>
<li>done</li>
</ol>
</li>
</ol>
<h1 id="10-read读取控制台输入">10. read读取控制台输入</h1>
<ol>
<li>基本语法：
<ol>
<li>read 选项 &quot;&quot; 参数</li>
<li>-p：指定读取时的提示符</li>
<li>-t X：指定读取时等待的时间（X秒），如果没有在等待的时间输入，就不再等待了。</li>
<li>变量：指定读取值的变量名</li>
</ol>
</li>
</ol>
<h1 id="11-自定义函数">11. 自定义函数</h1>
<ol>
<li>基本语法：
<ol>
<li>[ function ] funname[()]</li>
<li>{</li>
<li>
<pre><code>Action;
</code></pre>
</li>
<li>
<pre><code>[return int;]
</code></pre>
</li>
<li>}</li>
<li>调用：funname [值]</li>
<li>案例：getsum.sh</li>
</ol>
</li>
</ol>
<pre><code>#!/bin/bash
#案例：计算两个参数的和（动态的方式获取），getSum
#定义函数getSum
function getSum() {
        sum=$[$n1+$n2]
        echo &quot;和sum=$sum&quot;
}
#输入两个值
read -p &quot;请输入一个数n1=&quot; n1
read -t 10 &quot;请输入一个数n2=&quot; n2
#调用自定义函数
getSum $n1 $n2
</code></pre>
<h1 id="12-系统函数">12. 系统函数</h1>
<ol>
<li>basename函数
<ol>
<li>basename：返回完整路径最后/的后面部分，常用于获取文件名</li>
<li>如果输入basename /root/shellcode/hello.sh</li>
<li>返回hello.sh</li>
<li>如果输入basename /root/shellcode/hello.sh .sh</li>
<li>则返回hello</li>
</ol>
</li>
<li>dirname函数
<ol>
<li>dirname：返回完整路径最后/的前面部分，常用于返回路径部分</li>
<li>如果输入dirname /root/shellcode/hello.sh</li>
<li>则会返回/root/shellcode</li>
</ol>
</li>
</ol>

            </div>
            
            
              <div class="next-post">
                <div class="next">下一篇</div>
                <a href="https://kite-007.github.io/linux-wang-luo-pei-zhi/">
                  <h3 class="post-title">
                    # Linux网络配置
                  </h3>
                </a>
              </div>
            

            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
<script type="application/javascript">

AOS.init();

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>






  </body>
</html>
